<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BudgetTrack Create Account</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    @keyframes blob {
      0%, 100% { transform: translate(0px, 0px) scale(1); }
      33% { transform: translate(30px, -50px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
    }
    .animate-blob { animation: blob 7s infinite; }
    .animation-delay-2000 { animation-delay: 2s; }
    .animation-delay-4000 { animation-delay: 4s; }
  </style>
</head>
<body class="flex items-center justify-center p-6 bg-gradient-to-r from-[#0a0a2a] to-[#2e3adf] min-h-screen">
  <div class="relative max-w-md w-full bg-white bg-opacity-90 rounded-2xl shadow-2xl p-8 sm:p-10 overflow-hidden">
    <!-- Background blobs -->
    <div aria-hidden="true" class="absolute -top-16 -left-16 w-48 h-48 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"></div>
    <div aria-hidden="true" class="absolute -bottom-20 -right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-2xl opacity-30 animate-blob animation-delay-2000"></div>
    <div aria-hidden="true" class="absolute top-1/2 left-1/2 w-96 h-96 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>

    <div class="relative z-10 text-center mb-6">
      <div class="inline-flex items-center justify-center text-blue-600 font-extrabold text-2xl sm:text-3xl mb-1 select-none">
        <i class="fas fa-file-invoice-dollar mr-3"></i>
        <span>BudgetTrack</span>
      </div>
      <p class="text-gray-700 text-base sm:text-lg font-medium tracking-wide">
        Take control of your finances today
      </p>
    </div>

    <h2 class="relative z-10 font-extrabold text-gray-900 text-xl sm:text-2xl mb-6 select-none">
      Create a New Account
    </h2>

    <form id="signup-form" class="relative z-10" novalidate>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
        <div>
          <label for="firstname" class="block text-sm font-semibold text-gray-900 mb-2">First Name</label>
          <input id="firstname" type="text" placeholder="Enter your first name" required class="w-full border rounded-lg px-4 py-3" />
        </div>
        <div>
          <label for="lastname" class="block text-sm font-semibold text-gray-900 mb-2">Last Name</label>
          <input id="lastname" type="text" placeholder="Enter your last name" required class="w-full border rounded-lg px-4 py-3" />
        </div>
      </div>

      <label for="contact" class="block text-sm font-semibold text-gray-900 mb-2">Contact Number</label>
      <input id="contact" type="tel" placeholder="Enter your contact number" required class="w-full border rounded-lg px-4 py-3 mb-5" />

      <label for="email" class="block text-sm font-semibold text-gray-900 mb-2">Email Address</label>
      <input id="email" type="email" placeholder="Enter your email" required class="w-full border rounded-lg px-4 py-3 mb-5" />

      <label for="password" class="block text-sm font-semibold text-gray-900 mb-2">Password</label>
      <input id="password" type="password" placeholder="Create a password" required class="w-full border rounded-lg px-4 py-3 mb-5" />

      <label for="confirm-password" class="block text-sm font-semibold text-gray-900 mb-2">Confirm Password</label>
      <input id="confirm-password" type="password" placeholder="Confirm your password" required class="w-full border rounded-lg px-4 py-3 mb-5" />

      <label for="currency" class="block text-sm font-semibold text-gray-900 mb-2">Preferred Currency</label>
      <select id="currency" required class="w-full border rounded-lg px-4 py-3 mb-5">
        <option value="" disabled selected>Select your currency</option>
        <option value="USD">USD - US Dollar</option>
        <option value="EUR">EUR - Euro</option>
        <option value="PHP">PHP - Philippine Peso</option>
        <option value="GBP">GBP - British Pound</option>
        <option value="JPY">JPY - Japanese Yen</option>
        <option value="AUD">AUD - Australian Dollar</option>
        <option value="CAD">CAD - Canadian Dollar</option>
        <option value="INR">INR - Indian Rupee</option>
        <option value="CNY">CNY - Chinese Yuan</option>
        <option value="KRW">KRW - South Korean Won</option>
        <option value="SGD">SGD - Singapore Dollar</option>
        <option value="THB">THB - Thai Baht</option>
        <option value="MXN">MXN - Mexican Peso</option>
        <option value="BRL">BRL - Brazilian Real</option>
      </select>

      <div class="flex items-center mb-6 text-sm">
        <input id="agree" type="checkbox" class="form-checkbox h-5 w-5 text-blue-600" />
        <label for="agree" class="ml-3 text-gray-900">I agree to the <a href="#" class="text-blue-600">Terms</a> and <a href="#" class="text-blue-600">Privacy Policy</a></label>
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg">Create Account</button>

      <p class="mt-6 text-center text-gray-700 text-sm">
        Already have an account? <a href="index.html" class="text-blue-600 font-semibold hover:underline">Log in</a>
      </p>
    </form>
  </div>

  <!-- Firebase Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBk-dE1Hk-yg6sU1uilShADBohUDPlOg2o",
      authDomain: "budget-tracker-14.firebaseapp.com",
      projectId: "budget-tracker-14",
      storageBucket: "budget-tracker-14.firebasestorage.app",
      messagingSenderId: "213270821410",
      appId: "1:213270821410:web:74011269ee05d2e72e687b",
      measurementId: "G-SDLEBN6QBG"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const form = document.getElementById("signup-form");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const firstname = document.getElementById("firstname").value.trim();
      const lastname = document.getElementById("lastname").value.trim();
      const contact = document.getElementById("contact").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      const confirmPassword = document.getElementById("confirm-password").value;
      const agree = document.getElementById("agree").checked;
      const currency = document.getElementById("currency").value;

      if (!currency) {
        alert("Please select a preferred currency.");
        return;
      }


      if (password !== confirmPassword) {
        alert("Passwords do not match.");
        return;
      }

      if (!agree) {
        alert("Please accept the terms.");
        return;
      }

      try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          const user = userCredential.user;

         // Save extra user info in Firestore
          await setDoc(doc(db, "users", user.uid), {
            uid: user.uid,
            firstname,
            lastname,
            contact,
            email,
            currency,
            createdAt: new Date()
          });

          alert("Account successfully created!");
          form.reset();

          // âœ… Redirect to login page
          window.location.href = "index.html";

        } catch (error) {
          console.error("Error creating account:", error.message);
          alert("Error: " + error.message);
        }
    });
  </script>
</body>
</html>